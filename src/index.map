{"version":3,"sources":["lib/webgl.js","lib/gl-obj.js","lib/create-canvas.js","lib/rain-renderer.js","../../node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../../node_modules/@babel/runtime/helpers/iterableToArray.js","../../node_modules/@babel/runtime/helpers/nonIterableSpread.js","../../node_modules/@babel/runtime/helpers/toConsumableArray.js","lib/times.js","lib/random.js","lib/raindrops.js","../../node_modules/regenerator-runtime/runtime.js","../../node_modules/regenerator-runtime/runtime-module.js","../../node_modules/@babel/runtime/regenerator/index.js","../../node_modules/@babel/runtime/helpers/asyncToGenerator.js","lib/image-loader.js","index.js"],"names":["getContext","canvas","options","contexts","context","some","name","e","document","body","classList","add","createProgram","gl","vertexScript","fragScript","vertexShader","createShader","VERTEX_SHADER","fragShader","FRAGMENT_SHADER","program","attachShader","linkProgram","linked","getProgramParameter","LINK_STATUS","lastError","getProgramInfoLog","error","deleteProgram","positionLocation","getAttribLocation","texCoordLocation","texCoordBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","buffer","script","type","shader","shaderSource","compileShader","compiled","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","createTexture","source","i","texture","activeTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","TEXTURE_MAG_FILTER","updateTexture","createUniform","location","getUniformLocation","args","texImage2D","RGBA","UNSIGNED_BYTE","setRectangle","x","y","width","height","x1","x2","y1","y2","msg","console","GL","vert","frag","init","prototype","WebGL","useProgram","v","draw","drawArrays","TRIANGLES","createCanvas","createElement","defaultOptions","renderShadow","minRefraction","maxRefraction","brightness","alphaMultiply","alphaSubtract","parallaxBg","parallaxFg","RainRenderer","canvasLiquid","imageFg","imageBg","imageShine","Object","assign","textures","programWater","programBlurX","programBlurY","parallaxX","parallaxY","alpha","vertShader","img","forEach","requestAnimationFrame","bind","updateTextures","resize","overlayTexture","times","n","f","call","random","from","to","interpolation","delta","Math","chance","c","dropSize","Drop","r","spreadX","spreadY","momentum","momentumX","lastSpawn","nextSpawn","parent","isNew","killed","shrink","minR","maxR","maxDrops","rainChance","rainLimit","dropletsRate","dropletsSize","dropletsCleaningRadiusMultiplier","raining","globalTimeScale","trailRate","autoShrink","spawnArea","trailScaleRange","collisionRadius","collisionRadiusIncrease","dropFallMultiplier","collisionBoostMultiplier","collisionBoost","Raindrops","scale","dropAlpha","dropColor","ctx","dropletsPixelDensity","droplets","dropletsCtx","dropletsCounter","drops","dropsGfx","clearDropletsGfx","textureCleaningIterations","lastRender","renderDropsGfx","update","deltaR","area","areaMultiplier","sqrt","drawDroplet","drawDrop","create","dropBuffer","dropBufferCtx","Array","apply","map","cur","drop","dropCtx","clearRect","globalCompositeOperation","drawImage","fillStyle","fillRect","clearDropletsCtx","beginPath","arc","PI","fill","length","scaleX","scaleY","d","max","min","globalAlpha","floor","clearDroplets","clearCanvas","createDrop","addDrop","push","updateRain","timeScale","rainDrops","limit","count","pow","rainDrop","clearDrops","setTimeout","clearTexture","updateDroplets","updateDrops","newDrops","concat","sort","a","b","va","vb","trailDrop","moved","checkCollision","slice","drop2","dx","dy","pi","r1","r2","a1","a2","targetR","now","Date","deltaT","loadImage","src","onLoad","Promise","resolve","reject","Image","crossOrigin","addEventListener","event","loadImages","images","all","ImageLoader","then","loadedImages","curImage","textureRainFg","textureRainBg","textureStormLightningFg","textureStormLightningBg","textureFalloutFg","textureFalloutBg","textureSunFg","textureSunBg","textureDrizzleFg","textureDrizzleBg","textureFg","textureFgCtx","textureBg","textureBgCtx","textureBgSize","textureFgSize","raindrops","renderer","parallax","weatherData","curWeatherData","blend","loadTextures","querySelector","dpi","window","devicePixelRatio","innerWidth","innerHeight","style","generateTextures","fg","bg"],"mappings":"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KAAK+D,aAAL,CAAmBpB,IAAI,CAAC/H,CAAxB,EAA0B+H,IAAI,CAAC9H,CAA/B,EAAiC8H,IAAI,CAAC3D,CAAL,GAAO,KAAKhJ,OAAL,CAAakK,gCAArD;AACzC,eAAKiC,QAAL,CAAc,KAAKjB,GAAnB,EAAwByB,IAAxB;AACD;AAEF;AACF,KAvGD,EAuGE,IAvGF;AAyGA,SAAKpB,KAAL,GAAayD,QAAb;AACD,GA7TiB;AA8TlBnD,EAAAA,MA9TkB,oBA8TV;AACN,SAAKmC,WAAL;AAEA,QAAIoC,GAAG,GAACC,IAAI,CAACD,GAAL,EAAR;AACA,QAAG,KAAKzE,UAAL,IAAiB,IAApB,EAA0B,KAAKA,UAAL,GAAgByE,GAAhB;AAC1B,QAAIE,MAAM,GAACF,GAAG,GAAC,KAAKzE,UAApB;AACA,QAAI0C,SAAS,GAACiC,MAAM,IAAG,IAAE,EAAH,GAAO,IAAT,CAApB;AACA,QAAGjC,SAAS,GAAC,GAAb,EAAkBA,SAAS,GAAC,GAAV;AAClBA,IAAAA,SAAS,IAAE,KAAKrO,OAAL,CAAaoK,eAAxB;AACA,SAAKuB,UAAL,GAAgByE,GAAhB;AAEA,SAAKrB,WAAL,CAAiBV,SAAjB;AAEAxG,IAAAA,qBAAqB,CAAC,KAAKgE,MAAL,CAAY/D,IAAZ,CAAiB,IAAjB,CAAD,CAArB;AACD;AA5UiB,CAApB;eA+UegD;;;;AClYf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpCA,SAASyF,SAAT,C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","file":"index.map","sourceRoot":"js","sourcesContent":["export function getContext(canvas, options={}) {\r\n  let contexts = [\"webgl\", \"experimental-webgl\"];\r\n  let context = null;\r\n\r\n  contexts.some(name=>{\r\n    try{\r\n      context = canvas.getContext(name,options);\r\n    }catch(e){};\r\n    return context!=null;\r\n  });\r\n\r\n  if(context==null){\r\n    document.body.classList.add(\"no-webgl\");\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\nexport function createProgram(gl,vertexScript,fragScript){\r\n  let vertexShader = createShader(gl, vertexScript, gl.VERTEX_SHADER);\r\n  let fragShader = createShader(gl, fragScript, gl.FRAGMENT_SHADER);\r\n\r\n  let program = gl.createProgram();\r\n  gl.attachShader(program, vertexShader);\r\n  gl.attachShader(program, fragShader);\r\n\r\n  gl.linkProgram(program);\r\n\r\n  let linked = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n  if (!linked) {\r\n      var lastError = gl.getProgramInfoLog(program);\r\n      error(\"Error in program linking: \" + lastError);\r\n      gl.deleteProgram(program);\r\n      return null;\r\n  }\r\n\r\n  var positionLocation = gl.getAttribLocation(program, \"a_position\");\r\n  var texCoordLocation = gl.getAttribLocation(program, \"a_texCoord\");\r\n  var texCoordBuffer = gl.createBuffer();\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);\r\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\r\n    -1.0, -1.0,\r\n     1.0, -1.0,\r\n    -1.0,  1.0,\r\n    -1.0,  1.0,\r\n     1.0, -1.0,\r\n     1.0,  1.0\r\n  ]), gl.STATIC_DRAW);\r\n  gl.enableVertexAttribArray(texCoordLocation);\r\n  gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n\r\n  // Create a buffer for the position of the rectangle corners.\r\n  var buffer = gl.createBuffer();\r\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n  gl.enableVertexAttribArray(positionLocation);\r\n  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);\r\n\r\n  return program;\r\n}\r\n\r\nexport function createShader(gl,script,type){\r\n  let shader = gl.createShader(type);\r\n  gl.shaderSource(shader,script);\r\n  gl.compileShader(shader);\r\n\r\n  let compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n\r\n  if (!compiled) {\r\n    let lastError = gl.getShaderInfoLog(shader);\r\n    error(\"Error compiling shader '\" + shader + \"':\" + lastError);\r\n    gl.deleteShader(shader);\r\n    return null;\r\n  }\r\n  return shader;\r\n}\r\nexport function createTexture(gl,source,i){\r\n  var texture = gl.createTexture();\r\n  activeTexture(gl,i);\r\n  gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\r\n  // Set the parameters so we can render any size image.\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\r\n\tif ( source == null ) {\r\n\t\treturn texture;\r\n\t} else {\r\n\t\tupdateTexture(gl,source);\r\n\t}\r\n\r\n  return texture;\r\n}\r\nexport function createUniform(gl,program,type,name,...args){\r\n  let location=gl.getUniformLocation(program,\"u_\"+name);\r\n  gl[\"uniform\"+type](location,...args);\r\n}\r\nexport function activeTexture(gl,i){\r\n  gl.activeTexture(gl[\"TEXTURE\"+i]);\r\n}\r\nexport function updateTexture(gl,source){\r\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\r\n}\r\nexport function setRectangle(gl, x, y, width, height) {\r\n  var x1 = x;\r\n  var x2 = x + width;\r\n  var y1 = y;\r\n  var y2 = y + height;\r\n  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\r\n     x1, y1,\r\n     x2, y1,\r\n     x1, y2,\r\n     x1, y2,\r\n     x2, y1,\r\n     x2, y2]), gl.STATIC_DRAW);\r\n}\r\n\r\nfunction error(msg){\r\n  console.error(msg);\r\n}\r\n","import * as WebGL from \"./webgl\";\r\n\r\nfunction GL(canvas,options,vert,frag){\r\n  this.init(canvas,options,vert,frag);\r\n}\r\nGL.prototype={\r\n  canvas:null,\r\n  gl:null,\r\n  program:null,\r\n  width:0,\r\n  height:0,\r\n  init(canvas,options,vert,frag){\r\n    this.canvas=canvas;\r\n    this.width=canvas.width;\r\n    this.height=canvas.height;\r\n    this.gl=WebGL.getContext(canvas,options);\r\n    this.program=this.createProgram(vert,frag);\r\n    this.useProgram(this.program);\r\n  },\r\n  createProgram(vert,frag){\r\n    let program=WebGL.createProgram(this.gl,vert,frag);\r\n    return program;\r\n  },\r\n  useProgram(program){\r\n    this.program=program;\r\n    this.gl.useProgram(program);\r\n  },\r\n  createTexture(source,i){\r\n    return WebGL.createTexture(this.gl,source,i);\r\n  },\r\n  createUniform(type,name,...v){\r\n    WebGL.createUniform(this.gl,this.program,type,name,...v);\r\n  },\r\n  activeTexture(i){\r\n    WebGL.activeTexture(this.gl,i);\r\n  },\r\n  updateTexture(source){\r\n    WebGL.updateTexture(this.gl,source);\r\n  },\r\n  draw(){\r\n    WebGL.setRectangle(this.gl, -1, -1, 2, 2);\r\n    this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n  }\r\n}\r\n\r\nexport default GL;\r\n","export default function createCanvas(width,height){\r\n  let canvas=document.createElement(\"canvas\");\r\n  canvas.width=width;\r\n  canvas.height=height;\r\n  return canvas;\r\n}\r\n","import * as WebGL from \"./webgl\";\r\nimport GL from \"./gl-obj\";\r\nimport createCanvas from \"./create-canvas\";\r\n\r\nimport vertShader from './shaders/simple.vert';\r\nimport fragShader from './shaders/water.frag';\r\n\r\nconst defaultOptions={\r\n  renderShadow:false,\r\n  minRefraction:256,\r\n  maxRefraction:512,\r\n  brightness:1,\r\n  alphaMultiply:20,\r\n  alphaSubtract:5,\r\n  parallaxBg:5,\r\n  parallaxFg:20\r\n}\r\nfunction RainRenderer(canvas,canvasLiquid, imageFg, imageBg, imageShine=null,options={}){\r\n\r\n  this.canvas=canvas;\r\n  this.canvasLiquid=canvasLiquid;\r\n  this.imageShine=imageShine;\r\n  this.imageFg=imageFg;\r\n  this.imageBg=imageBg;\r\n  this.options=Object.assign({},defaultOptions, options);\r\n  this.init();\r\n}\r\n\r\nRainRenderer.prototype={\r\n  canvas:null,\r\n  gl:null,\r\n  canvasLiquid:null,\r\n  width:0,\r\n  height:0,\r\n  imageShine:\"\",\r\n  imageFg:\"\",\r\n  imageBg:\"\",\r\n  textures:null,\r\n  programWater:null,\r\n  programBlurX:null,\r\n  programBlurY:null,\r\n  parallaxX:0,\r\n  parallaxY:0,\r\n  renderShadow:false,\r\n  options:null,\r\n  init(){\r\n    this.width=this.canvas.width;\r\n    this.height=this.canvas.height;\r\n    this.gl=new GL(this.canvas, {alpha:false},vertShader,fragShader);\r\n    let gl=this.gl;\r\n    this.programWater=gl.program;\r\n\r\n    gl.createUniform(\"2f\",\"resolution\",this.width,this.height);\r\n    gl.createUniform(\"1f\",\"textureRatio\",this.imageBg.width/this.imageBg.height);\r\n    gl.createUniform(\"1i\",\"renderShine\",this.imageShine==null?false:true);\r\n    gl.createUniform(\"1i\",\"renderShadow\",this.options.renderShadow);\r\n    gl.createUniform(\"1f\",\"minRefraction\",this.options.minRefraction);\r\n    gl.createUniform(\"1f\",\"refractionDelta\",this.options.maxRefraction-this.options.minRefraction);\r\n    gl.createUniform(\"1f\",\"brightness\",this.options.brightness);\r\n    gl.createUniform(\"1f\",\"alphaMultiply\",this.options.alphaMultiply);\r\n    gl.createUniform(\"1f\",\"alphaSubtract\",this.options.alphaSubtract);\r\n    gl.createUniform(\"1f\",\"parallaxBg\",this.options.parallaxBg);\r\n    gl.createUniform(\"1f\",\"parallaxFg\",this.options.parallaxFg);\r\n\r\n\r\n    gl.createTexture(null,0);\r\n\r\n    this.textures=[\r\n      {name:'textureShine', img:this.imageShine==null?createCanvas(2,2):this.imageShine},\r\n      {name:'textureFg', img:this.imageFg},\r\n      {name:'textureBg', img:this.imageBg}\r\n    ];\r\n\r\n    this.textures.forEach((texture,i)=>{\r\n      gl.createTexture(texture.img,i+1);\r\n      gl.createUniform(\"1i\",texture.name,i+1);\r\n    });\r\n\r\n    this.draw();\r\n  },\r\n  draw(){\r\n    this.gl.useProgram(this.programWater);\r\n    this.gl.createUniform(\"2f\", \"parallax\", this.parallaxX,this.parallaxY);\r\n    this.updateTexture();\r\n    this.gl.draw();\r\n\r\n    requestAnimationFrame(this.draw.bind(this));\r\n  },\r\n  updateTextures(){\r\n    this.textures.forEach((texture,i)=>{\r\n      this.gl.activeTexture(i+1);\r\n      this.gl.updateTexture(texture.img);\r\n    })\r\n  },\r\n  updateTexture(){\r\n    this.gl.activeTexture(0);\r\n    this.gl.updateTexture(this.canvasLiquid);\r\n  },\r\n  resize(){\r\n\r\n  },\r\n  get overlayTexture(){\r\n\r\n  },\r\n  set overlayTexture(v){\r\n\r\n  }\r\n}\r\n\r\nexport default RainRenderer;\r\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","export default function times(n,f){\r\n  for (let i = 0; i < n; i++) {\r\n    f.call(this,i);\r\n  }\r\n}\r\n","export function random(from=null,to=null,interpolation=null){\r\n  if(from==null){\r\n    from=0;\r\n    to=1;\r\n  }else if(from!=null && to==null){\r\n    to=from;\r\n    from=0;\r\n  }\r\n  const delta=to-from;\r\n\r\n  if(interpolation==null){\r\n    interpolation=(n)=>{\r\n      return n;\r\n    }\r\n  }\r\n  return from+(interpolation(Math.random())*delta);\r\n}\r\nexport function chance(c){\r\n  return random()<=c;\r\n}\r\n","import times from \"./times.js\";\r\nimport createCanvas from \"./create-canvas.js\";\r\nimport {random, chance} from \"./random\";\r\n\r\nlet dropSize=64;\r\nconst Drop={\r\n  x:0,\r\n  y:0,\r\n  r:0,\r\n  spreadX:0,\r\n  spreadY:0,\r\n  momentum:0,\r\n  momentumX:0,\r\n  lastSpawn:0,\r\n  nextSpawn:0,\r\n  parent:null,\r\n  isNew:true,\r\n  killed:false,\r\n  shrink:0,\r\n}\r\nconst defaultOptions={\r\n  minR:10,\r\n  maxR:40,\r\n  maxDrops:900,\r\n  rainChance:0.3,\r\n  rainLimit:3,\r\n  dropletsRate:50,\r\n  dropletsSize:[2,4],\r\n  dropletsCleaningRadiusMultiplier:0.43,\r\n  raining:true,\r\n  globalTimeScale:1,\r\n  trailRate:1,\r\n  autoShrink:true,\r\n  spawnArea:[-0.1,0.95],\r\n  trailScaleRange:[0.2,0.5],\r\n  collisionRadius:0.65,\r\n  collisionRadiusIncrease:0.01,\r\n  dropFallMultiplier:1,\r\n  collisionBoostMultiplier:0.05,\r\n  collisionBoost:1,\r\n}\r\n\r\nfunction Raindrops(width,height,scale,dropAlpha,dropColor,options={}){\r\n  this.width=width;\r\n  this.height=height;\r\n  this.scale=scale;\r\n  this.dropAlpha=dropAlpha;\r\n  this.dropColor=dropColor;\r\n  this.options=Object.assign({},defaultOptions,options);\r\n  this.init();\r\n}\r\nRaindrops.prototype={\r\n  dropColor:null,\r\n  dropAlpha:null,\r\n  canvas:null,\r\n  ctx:null,\r\n  width:0,\r\n  height:0,\r\n  scale:0,\r\n  dropletsPixelDensity:1,\r\n  droplets:null,\r\n  dropletsCtx:null,\r\n  dropletsCounter:0,\r\n  drops:null,\r\n  dropsGfx:null,\r\n  clearDropletsGfx:null,\r\n  textureCleaningIterations:0,\r\n  lastRender:null,\r\n\r\n  options:null,\r\n\r\n  init(){\r\n    this.canvas = createCanvas(this.width,this.height);\r\n    this.ctx = this.canvas.getContext('2d');\r\n\r\n    this.droplets = createCanvas(this.width*this.dropletsPixelDensity,this.height*this.dropletsPixelDensity);\r\n    this.dropletsCtx = this.droplets.getContext('2d');\r\n\r\n    this.drops=[];\r\n    this.dropsGfx=[];\r\n\r\n    this.renderDropsGfx();\r\n\r\n    this.update();\r\n  },\r\n  get deltaR(){\r\n    return this.options.maxR-this.options.minR;\r\n  },\r\n  get area(){\r\n    return (this.width*this.height)/this.scale;\r\n  },\r\n  get areaMultiplier(){\r\n    return Math.sqrt(this.area/(1024*768));\r\n  },\r\n  drawDroplet(x,y,r){\r\n    this.drawDrop(this.dropletsCtx,Object.assign(Object.create(Drop),{\r\n      x:x*this.dropletsPixelDensity,\r\n      y:y*this.dropletsPixelDensity,\r\n      r:r*this.dropletsPixelDensity\r\n    }));\r\n  },\r\n\r\n  renderDropsGfx(){\r\n    let dropBuffer=createCanvas(dropSize,dropSize);\r\n    let dropBufferCtx=dropBuffer.getContext('2d');\r\n    this.dropsGfx=Array.apply(null,Array(255))\r\n      .map((cur,i)=>{\r\n        let drop=createCanvas(dropSize,dropSize);\r\n        let dropCtx=drop.getContext('2d');\r\n\r\n        dropBufferCtx.clearRect(0,0,dropSize,dropSize);\r\n\r\n        // color\r\n        dropBufferCtx.globalCompositeOperation=\"source-over\";\r\n        dropBufferCtx.drawImage(this.dropColor,0,0,dropSize,dropSize);\r\n\r\n        // blue overlay, for depth\r\n        dropBufferCtx.globalCompositeOperation=\"screen\";\r\n        dropBufferCtx.fillStyle=\"rgba(0,0,\"+i+\",1)\";\r\n        dropBufferCtx.fillRect(0,0,dropSize,dropSize);\r\n\r\n        // alpha\r\n        dropCtx.globalCompositeOperation=\"source-over\";\r\n        dropCtx.drawImage(this.dropAlpha,0,0,dropSize,dropSize);\r\n\r\n        dropCtx.globalCompositeOperation=\"source-in\";\r\n        dropCtx.drawImage(dropBuffer,0,0,dropSize,dropSize);\r\n        return drop;\r\n    });\r\n\r\n    // create circle that will be used as a brush to remove droplets\r\n    this.clearDropletsGfx=createCanvas(128,128);\r\n    let clearDropletsCtx=this.clearDropletsGfx.getContext(\"2d\");\r\n    clearDropletsCtx.fillStyle=\"#000\";\r\n    clearDropletsCtx.beginPath();\r\n    clearDropletsCtx.arc(64,64,64,0,Math.PI*2);\r\n    clearDropletsCtx.fill();\r\n  },\r\n  drawDrop(ctx,drop){\r\n    if(this.dropsGfx.length>0){\r\n      let x=drop.x;\r\n      let y=drop.y;\r\n      let r=drop.r;\r\n      let spreadX=drop.spreadX;\r\n      let spreadY=drop.spreadY;\r\n\r\n      let scaleX=1;\r\n      let scaleY=1.5;\r\n\r\n      let d=Math.max(0,Math.min(1,((r-this.options.minR)/(this.deltaR))*0.9));\r\n      d*=1/(((drop.spreadX+drop.spreadY)*0.5)+1);\r\n\r\n      ctx.globalAlpha=1;\r\n      ctx.globalCompositeOperation=\"source-over\";\r\n\r\n      d=Math.floor(d*(this.dropsGfx.length-1));\r\n      ctx.drawImage(\r\n        this.dropsGfx[d],\r\n        (x-(r*scaleX*(spreadX+1)))*this.scale,\r\n        (y-(r*scaleY*(spreadY+1)))*this.scale,\r\n        (r*2*scaleX*(spreadX+1))*this.scale,\r\n        (r*2*scaleY*(spreadY+1))*this.scale\r\n      );\r\n    }\r\n  },\r\n  clearDroplets(x,y,r=30){\r\n    let ctx=this.dropletsCtx;\r\n    ctx.globalCompositeOperation=\"destination-out\";\r\n    ctx.drawImage(\r\n      this.clearDropletsGfx,\r\n      (x-r)*this.dropletsPixelDensity*this.scale,\r\n      (y-r)*this.dropletsPixelDensity*this.scale,\r\n      (r*2)*this.dropletsPixelDensity*this.scale,\r\n      (r*2)*this.dropletsPixelDensity*this.scale*1.5\r\n    )\r\n  },\r\n  clearCanvas(){\r\n    this.ctx.clearRect(0,0,this.width,this.height);\r\n  },\r\n  createDrop(options){\r\n    if(this.drops.length >= this.options.maxDrops*this.areaMultiplier) return null;\r\n\r\n    return Object.assign(Object.create(Drop),options);\r\n  },\r\n  addDrop(drop){\r\n    if(this.drops.length >= this.options.maxDrops*this.areaMultiplier || drop==null) return false;\r\n\r\n    this.drops.push(drop);\r\n    return true;\r\n  },\r\n  updateRain(timeScale){\r\n    let rainDrops=[];\r\n    if(this.options.raining){\r\n      let limit=this.options.rainLimit*timeScale*this.areaMultiplier;\r\n      let count=0;\r\n      while(chance(this.options.rainChance*timeScale*this.areaMultiplier) && count<limit){\r\n        count++;\r\n        let r=random(this.options.minR,this.options.maxR,(n)=>{\r\n          return Math.pow(n,3);\r\n        });\r\n        let rainDrop=this.createDrop({\r\n          x:random(this.width/this.scale),\r\n          y:random((this.height/this.scale)*this.options.spawnArea[0],(this.height/this.scale)*this.options.spawnArea[1]),\r\n          r:r,\r\n          momentum:1+((r-this.options.minR)*0.1)+random(2),\r\n          spreadX:1.5,\r\n          spreadY:1.5,\r\n        });\r\n        if(rainDrop!=null){\r\n          rainDrops.push(rainDrop);\r\n        }\r\n      }\r\n    }\r\n    return rainDrops;\r\n  },\r\n  clearDrops(){\r\n    this.drops.forEach((drop)=>{\r\n      setTimeout(()=>{\r\n        drop.shrink=0.1+(random(0.5));\r\n      },random(1200))\r\n    })\r\n    this.clearTexture();\r\n  },\r\n  clearTexture(){\r\n    this.textureCleaningIterations=50;\r\n  },\r\n  updateDroplets(timeScale){\r\n    if(this.textureCleaningIterations>0){\r\n      this.textureCleaningIterations-=1*timeScale;\r\n      this.dropletsCtx.globalCompositeOperation=\"destination-out\";\r\n      this.dropletsCtx.fillStyle=\"rgba(0,0,0,\"+(0.05*timeScale)+\")\";\r\n      this.dropletsCtx.fillRect(0,0,\r\n        this.width*this.dropletsPixelDensity,this.height*this.dropletsPixelDensity);\r\n    }\r\n    if(this.options.raining){\r\n      this.dropletsCounter+=this.options.dropletsRate*timeScale*this.areaMultiplier;\r\n      times(this.dropletsCounter,(i)=>{\r\n        this.dropletsCounter--;\r\n        this.drawDroplet(\r\n          random(this.width/this.scale),\r\n          random(this.height/this.scale),\r\n          random(...this.options.dropletsSize,(n)=>{\r\n            return n*n;\r\n          })\r\n        )\r\n      });\r\n    }\r\n    this.ctx.drawImage(this.droplets,0,0,this.width,this.height);\r\n  },\r\n  updateDrops(timeScale){\r\n    let newDrops=[];\r\n\r\n    this.updateDroplets(timeScale);\r\n    let rainDrops=this.updateRain(timeScale);\r\n    newDrops=newDrops.concat(rainDrops);\r\n\r\n    this.drops.sort((a,b)=>{\r\n      let va=(a.y*(this.width/this.scale))+a.x;\r\n      let vb=(b.y*(this.width/this.scale))+b.x;\r\n      return va>vb?1:va==vb?0:-1;\r\n    });\r\n\r\n    this.drops.forEach(function(drop,i){\r\n      if(!drop.killed){\r\n        // update gravity\r\n        // (chance of drops \"creeping down\")\r\n        if(chance((drop.r-(this.options.minR*this.options.dropFallMultiplier)) * (0.1/this.deltaR) * timeScale)){\r\n          drop.momentum += random((drop.r/this.options.maxR)*4);\r\n        }\r\n        // clean small drops\r\n        if(this.options.autoShrink && drop.r<=this.options.minR && chance(0.05*timeScale)){\r\n          drop.shrink+=0.01;\r\n        }\r\n        //update shrinkage\r\n        drop.r -= drop.shrink*timeScale;\r\n        if(drop.r<=0) drop.killed=true;\r\n\r\n        // update trails\r\n        if(this.options.raining){\r\n          drop.lastSpawn+=drop.momentum*timeScale*this.options.trailRate;\r\n          if(drop.lastSpawn>drop.nextSpawn){\r\n            let trailDrop=this.createDrop({\r\n              x:drop.x+(random(-drop.r,drop.r)*0.1),\r\n              y:drop.y-(drop.r*0.01),\r\n              r:drop.r*random(...this.options.trailScaleRange),\r\n              spreadY:drop.momentum*0.1,\r\n              parent:drop,\r\n            });\r\n\r\n            if(trailDrop!=null){\r\n              newDrops.push(trailDrop);\r\n\r\n              drop.r*=Math.pow(0.97,timeScale);\r\n              drop.lastSpawn=0;\r\n              drop.nextSpawn=random(this.options.minR,this.options.maxR)-(drop.momentum*2*this.options.trailRate)+(this.options.maxR-drop.r);\r\n            }\r\n          }\r\n        }\r\n\r\n        //normalize spread\r\n        drop.spreadX*=Math.pow(0.4,timeScale);\r\n        drop.spreadY*=Math.pow(0.7,timeScale);\r\n\r\n        //update position\r\n        let moved=drop.momentum>0;\r\n        if(moved && !drop.killed){\r\n          drop.y+=drop.momentum*this.options.globalTimeScale;\r\n          drop.x+=drop.momentumX*this.options.globalTimeScale;\r\n          if(drop.y>(this.height/this.scale)+drop.r){\r\n            drop.killed=true;\r\n          }\r\n        }\r\n\r\n        // collision\r\n        let checkCollision=(moved || drop.isNew) && !drop.killed;\r\n        drop.isNew=false;\r\n\r\n        if(checkCollision){\r\n          this.drops.slice(i+1,i+70).forEach((drop2)=>{\r\n            //basic check\r\n            if(\r\n              drop != drop2 &&\r\n              drop.r > drop2.r &&\r\n              drop.parent != drop2 &&\r\n              drop2.parent != drop &&\r\n              !drop2.killed\r\n            ){\r\n              let dx=drop2.x-drop.x;\r\n              let dy=drop2.y-drop.y;\r\n              var d=Math.sqrt((dx*dx)+(dy*dy));\r\n              //if it's within acceptable distance\r\n              if(d<(drop.r+drop2.r)*(this.options.collisionRadius+(drop.momentum*this.options.collisionRadiusIncrease*timeScale))){\r\n                let pi=Math.PI;\r\n                let r1=drop.r;\r\n                let r2=drop2.r;\r\n                let a1=pi*(r1*r1);\r\n                let a2=pi*(r2*r2);\r\n                let targetR=Math.sqrt((a1+(a2*0.8))/pi);\r\n                if(targetR>this.maxR){\r\n                  targetR=this.maxR;\r\n                }\r\n                drop.r=targetR;\r\n                drop.momentumX+=dx*0.1;\r\n                drop.spreadX=0;\r\n                drop.spreadY=0;\r\n                drop2.killed=true;\r\n                drop.momentum=Math.max(drop2.momentum,Math.min(40,drop.momentum+(targetR*this.options.collisionBoostMultiplier)+this.options.collisionBoost));\r\n              }\r\n            }\r\n          });\r\n        }\r\n\r\n        //slowdown momentum\r\n        drop.momentum-=Math.max(1,(this.options.minR*0.5)-drop.momentum)*0.1*timeScale;\r\n        if(drop.momentum<0) drop.momentum=0;\r\n        drop.momentumX*=Math.pow(0.7,timeScale);\r\n\r\n\r\n        if(!drop.killed){\r\n          newDrops.push(drop);\r\n          if(moved && this.options.dropletsRate>0) this.clearDroplets(drop.x,drop.y,drop.r*this.options.dropletsCleaningRadiusMultiplier);\r\n          this.drawDrop(this.ctx, drop);\r\n        }\r\n\r\n      }\r\n    },this);\r\n\r\n    this.drops = newDrops;\r\n  },\r\n  update(){\r\n    this.clearCanvas();\r\n\r\n    let now=Date.now();\r\n    if(this.lastRender==null) this.lastRender=now;\r\n    let deltaT=now-this.lastRender;\r\n    let timeScale=deltaT/((1/60)*1000);\r\n    if(timeScale>1.1) timeScale=1.1;\r\n    timeScale*=this.options.globalTimeScale;\r\n    this.lastRender=now;\r\n\r\n    this.updateDrops(timeScale);\r\n\r\n    requestAnimationFrame(this.update.bind(this));\r\n  }\r\n}\r\n\r\nexport default Raindrops;\r\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === \"object\" && self);\n  })() || Function(\"return this\")()\n);\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() {\n  return this || (typeof self === \"object\" && self);\n})() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n","module.exports = require(\"regenerator-runtime\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function loadImage(src, i, onLoad) {\r\n  return new Promise((resolve, reject) => {\r\n    if (typeof src == \"string\") {\r\n      src = {\r\n        name: \"image\" + i,\r\n        src,\r\n      };\r\n    }\r\n\r\n    let img = new Image();\r\n    img.crossOrigin = \"anonymous\";\r\n\r\n    src.img = img;\r\n    img.src = src.src;\r\n    img.addEventListener(\"load\", (event) => {\r\n      if (typeof onLoad == \"function\") {\r\n        onLoad.call(null, img, i);\r\n      }\r\n      resolve(src);\r\n    });\r\n  })\r\n}\r\n\r\nfunction loadImages(images, onLoad) {\r\n  return Promise.all(images.map((src, i) => {\r\n    return loadImage(src, i, onLoad);\r\n  }));\r\n}\r\n\r\nexport default async function ImageLoader(images, onLoad) {\r\n  let r = {};\r\n\r\n  await loadImages(images, onLoad).then((loadedImages) => {\r\n    \r\n    loadedImages.forEach((curImage) => {\r\n      r[curImage.name] = {\r\n        img: curImage.img,\r\n        src: curImage.src,\r\n      };\r\n    })\r\n\r\n  });\r\n\r\n  return r;\r\n}\r\n","import RainRenderer from \"./lib/rain-renderer\";\r\nimport Raindrops from \"./lib/raindrops\";\r\nimport loadImages from \"./lib/image-loader\";\r\nimport createCanvas from \"./lib/create-canvas\";\r\n\r\nlet textureRainFg, textureRainBg,\r\n  textureStormLightningFg, textureStormLightningBg,\r\n  textureFalloutFg, textureFalloutBg,\r\n  textureSunFg, textureSunBg,\r\n  textureDrizzleFg, textureDrizzleBg,\r\n  dropColor, dropAlpha;\r\n\r\nlet textureFg,\r\n  textureFgCtx,\r\n  textureBg,\r\n  textureBgCtx;\r\n\r\nlet textureBgSize = {\r\n  width: 384,\r\n  height: 256\r\n}\r\nlet textureFgSize = {\r\n  width: 96,\r\n  height: 64\r\n}\r\n\r\nlet raindrops,\r\n  renderer,\r\n  canvas;\r\n\r\nlet parallax = { x: 0, y: 0 };\r\n\r\nlet weatherData = null;\r\nlet curWeatherData = null;\r\nlet blend = { v: 0 };\r\n\r\nfunction loadTextures() {\r\n  loadImages([\r\n    { name: \"dropAlpha\", src: \"img/drop-alpha.png\" },\r\n    { name: \"dropColor\", src: \"img/drop-color.png\" },\r\n\r\n    { name: \"textureRainFg\", src: \"img/weather/texture-rain-fg.png\" },\r\n    { name: \"textureRainBg\", src: \"img/weather/texture-rain-bg.png\" },\r\n\r\n    { name: \"textureStormLightningFg\", src: \"img/weather/texture-storm-lightning-fg.png\" },\r\n    { name: \"textureStormLightningBg\", src: \"img/weather/texture-storm-lightning-bg.png\" },\r\n\r\n    { name: \"textureFalloutFg\", src: \"img/weather/texture-fallout-fg.png\" },\r\n    { name: \"textureFalloutBg\", src: \"img/weather/texture-fallout-bg.png\" },\r\n\r\n    { name: \"textureSunFg\", src: \"img/weather/texture-sun-fg.png\" },\r\n    { name: \"textureSunBg\", src: \"img/weather/texture-sun-bg.png\" },\r\n\r\n    { name: \"textureDrizzleFg\", src: \"img/weather/texture-drizzle-fg.png\" },\r\n    { name: \"textureDrizzleBg\", src: \"img/weather/texture-drizzle-bg.png\" },\r\n  ]).then((images) => {\r\n    textureRainFg = images.textureRainFg.img;\r\n    textureRainBg = images.textureRainBg.img;\r\n\r\n    textureFalloutFg = images.textureFalloutFg.img;\r\n    textureFalloutBg = images.textureFalloutBg.img;\r\n\r\n    textureStormLightningFg = images.textureStormLightningFg.img;\r\n    textureStormLightningBg = images.textureStormLightningBg.img;\r\n\r\n    textureSunFg = images.textureSunFg.img;\r\n    textureSunBg = images.textureSunBg.img;\r\n\r\n    textureDrizzleFg = images.textureDrizzleFg.img;\r\n    textureDrizzleBg = images.textureDrizzleBg.img;\r\n\r\n    dropColor = images.dropColor.img;\r\n    dropAlpha = images.dropAlpha.img;\r\n\r\n    init();\r\n  });\r\n}\r\nloadTextures();\r\n\r\n\r\n////////////\r\n\r\n\r\nfunction init() {\r\n  canvas = document.querySelector('#container');\r\n\r\n  let dpi = window.devicePixelRatio;\r\n\r\n  canvas.width = window.innerWidth * dpi;\r\n  canvas.height = window.innerHeight * dpi;\r\n  canvas.style.width = window.innerWidth + \"px\";\r\n  canvas.style.height = window.innerHeight + \"px\";\r\n\r\n  raindrops = new Raindrops(\r\n    canvas.width,\r\n    canvas.height,\r\n    dpi,\r\n    dropAlpha,\r\n    dropColor, {\r\n      trailRate: 1,\r\n      trailScaleRange: [0.2, 0.45],\r\n      collisionRadius: 0.45,\r\n      dropletsCleaningRadiusMultiplier: 0.28,\r\n    }\r\n  );\r\n\r\n  textureFg = createCanvas(textureFgSize.width, textureFgSize.height);\r\n  textureFgCtx = textureFg.getContext('2d');\r\n  textureBg = createCanvas(textureBgSize.width, textureBgSize.height);\r\n  textureBgCtx = textureBg.getContext('2d');\r\n\r\n  generateTextures(textureRainFg, textureRainBg);\r\n\r\n  renderer = new RainRenderer(canvas, raindrops.canvas, textureFg, textureBg, null, {\r\n    brightness: 1.04,\r\n    alphaMultiply: 6,\r\n    alphaSubtract: 3,\r\n    // minRefraction:256,\r\n    // maxRefraction:512\r\n  });\r\n\r\n}\r\n\r\n\r\n\r\n\r\nfunction generateTextures(fg, bg, alpha = 1) {\r\n  textureFgCtx.globalAlpha = alpha;\r\n  textureFgCtx.drawImage(fg, 0, 0, textureFgSize.width, textureFgSize.height);\r\n\r\n  textureBgCtx.globalAlpha = alpha;\r\n  textureBgCtx.drawImage(bg, 0, 0, textureBgSize.width, textureBgSize.height);\r\n}\r\n"]}